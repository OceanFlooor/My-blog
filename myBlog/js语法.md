# JS 基本语法

主要参考：https://wangdoc.com/javascript/basic/grammar.html

## 语句和表达式

JavaScript 程序的执行单位为行（line），也就是一行一行地执行。一般情况下，每一行就是一个语句。

语句（statement）是为了完成某种任务而进行的操作，比如下面就是一行赋值语句。

```javascript
var a = 1 + 3;
```

上句代码干了两件事：声命变量 a，把表达式 `1 + 3` 的值赋值给变量 a。语句和表达式的区别在于，前者主要为了进行某种操作，一般情况下不需要返回值；后者则是为了得到返回值，一定会返回一个值。分号`;`表示一个语句的结束，逗号`,`表示这语句没完。凡是 JavaScript 语言中预期为值的地方，都可以使用表达式。比如，赋值语句的等号右边，预期是一个值，因此可以放置各种表达式。

## 变量

变量是对“值”的具名引用。变量就是为“值”起名，然后引用这个名字，就等同于引用这个值。变量的名字就是变量名。

变量的值存放在内存中的堆和栈内。非对象（boolean、number、string）数据存放在栈中，在内存中顺序存储，对象数据存放在堆中，随机存储。

```javascript
var a = 1;
```

上面的代码先声明变量 a，然后在变量 a 与数值 1 之间建立引用关系，称为将数值 1“赋值”给变量 a。以后，引用变量名 a 就会得到数值 1。最前面的 var，是变量声明命令。它表示通知解释引擎，要创建一个变量 a。

值得注意的是，声明变量这个动作会使得变量提升。例如：

```javascript
console.log(a);
var a;
```

上面代码并不会报错，原因就是变量提升的原因，var 会把变量 a 提升到代码的最前面，也就是说，上面的代码运行起来就等价于：

```javascript
var a;
console.log(a);
```

运行结果就是`undefined`

如果使用 var 重新声明一个已经存在的变量，是无效的。

```javascript
var x = 1;
var x;
x; // 1
```

上面代码中，变量 x 声明了两次，第二次声明是无效的。

但是，如果第二次声明的时候还进行了赋值，则会覆盖掉前面的值。

```javascript
var x = 1;
var x = 2;

// 等同于

var x = 1;
var x;
x = 2;
```

## 标识符

标识符（identifier）指的是用来识别各种值的合法名称。最常见的标识符就是变量名，以及后面要提到的函数名。

标识符的命名规则：

- 第一个字符，可以是任意 Unicode 字母（包括英文字母和其他语言的字母），以及美元符号（\$）和下划线（\_）
- 第二个字符及后面的字符，除了 Unicode 字母、美元符号和下划线，还可以用数字 0-9
- JavaScript 有一些保留字，不能用作标识符

## 注释

两种注释语法：

```javascript
// ......

/** 
   ...
*/
```

## if, if else

语法：

```javascript
  if (布尔值) {
    ...
  } else {
    ...
  }
```

## 三元运算符

常用语代替简单的 if else 语句

```javascript
条件 ? 语句1 : 语句2;
```

如果条件为真，执行语句 1，否则执行语句 2

三元表达式可以嵌套使用：

```javascript
条件1 ? 语句1 : 条件2 ? 语句2 : 语句3;
```

如果满足条件 1，执行语句 1，否则判断是否满足条件 2，如果满足，执行语句 2，否则执行语句 3，可用于替代`if...else if...else`

## for 与 while

```javascript
for (初始化表达式; 条件; 递增表达式) {
  语句;
}

while (条件) {
  语句;
}
```

如果满足条件则会一直执行代码块内的语句。在代码块内使用`break`可以跳出本句循环语句，使用`continue`可以结束本轮循环，进入下一轮循环。

需要注意，如果存在多重循环，不带参数的`break`语句和`continue`语句都只针对最内层循环。

## label

JavaScript 语言允许，语句的前面有标签（label），相当于定位符，用于跳转到程序的任意位置，标签的格式如下。

标签通常与 break 语句和 continue 语句配合使用，跳出特定的循环。

```javascript
top: for (var i = 0; i < 3; i++) {
  for (var j = 0; j < 3; j++) {
    if (i === 1 && j === 1) break top;
    console.log("i=" + i + ", j=" + j);
  }
}
// i=0, j=0
// i=0, j=1
// i=0, j=2
// i=1, j=0
```

上面代码为一个双重循环区块，break 命令后面加上了 top 标签（注意，top 不用加引号），满足条件时，直接跳出双层循环。如果 break 语句后面不使用标签，则只能跳出内层循环，进入下一次的外层循环。
